version: 1.0
processes:
  -
    name: server
    go:
      output: reports
      executable: ../konfig
      command: server
    timeout: 5
    port: 8080
    log: reports/server.log
    environment:
      CONFIG_FILE: .config/server.config.yml
  -
    name: worker
    go:
      output: reports
      executable: ../konfig
      command: worker
    timeout: 5
    port: 8081
    log: reports/worker.log
    environment:
      CONFIG_FILE: .config/worker.config.yml
services:
  -
    name: vault
    port: 8300
    proxy:
      type: fault_injection
      port: 8200
      log: reports/proxy_vault.log
      options:
        delay: 2
